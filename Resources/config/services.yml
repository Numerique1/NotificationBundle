parameters:
# EVENT
    # Handler
    numerique1_notification.event.handler.notification_builder_handler.class: Numerique1\Bundle\NotificationBundle\Event\Handler\NotificationBuilderHandler
    # Listener
    numerique1_notification.event.listener.notification_doctrine_listener.class: Numerique1\Bundle\NotificationBundle\Event\Listener\NotificationDoctrineListener
# RULE
    #Provider
    numerique1_notification.rule.rule_provider.class: Numerique1\Bundle\NotificationBundle\Rule\RuleProvider
# Builder
    # Container
    numerique1_notification.builder.notification_builder_container.class: Numerique1\Bundle\NotificationBundle\Builder\NotificationBuilderContainer

services:
#EVENT
    # Handler
    numerique1_notification.event.handler.notification_builder_handler:
        class: %numerique1_notification.event.handler.notification_builder_handler.class%
        arguments:
            - @event_dispatcher
            - @numerique1_notification.builder.notification_builder_container

   # Listener
    numerique1_notification.event.listener.notification_doctrine_listener.listener:
        class: %numerique1_notification.event.listener.notification_doctrine_listener.class%
        arguments:
            - @event_dispatcher
            - @numerique1_notification.rule.rule_provider
        tags:
            - { name: doctrine.event_listener, event: postPersist }
            - { name: doctrine.event_listener, event: preUpdate }
            - { name: doctrine.event_listener, event: postUpdate }
            - { name: doctrine.event_listener, event: postRemove }
            - { name: doctrine.event_listener, event: preRemove }

#RULE
    #Provider
    numerique1_notification.rule.rule_provider:
        class: %numerique1_notification.rule.rule_provider.class%
        arguments:
            - @service_container
            - %numerique1_notification.configs%
#BUILDER
    #Container
    numerique1_notification.builder.notification_builder_container:
        class: %numerique1_notification.builder.notification_builder_container.class%
        lazy: true
